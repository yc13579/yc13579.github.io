<!doctype html>  
<html>
<body  style='overflow:hidden'>  
<canvas id="can" width="400" height="400" style="background:Black;display: block;margin:20px auto;"></canvas>  
<a href="index3.html">返回首页</a>
<script>  
var sn = [ 42, 41 ], dz = 43, fx = 1, n, ctx = document.getElementById("can").getContext("2d"); //声明变量获取元素
function draw(t, c) {  //制作蛇身
ctx.fillStyle = c;  //填充背景颜色   
ctx.fillRect(t % 20 * 20 + 1, ~~(t /  20) * 20 + 1, 18, 18);  //绘制已填充矩形
}
document.onkeydown = function(e) {    //按下键盘，操作蛇的本身
fx = sn[1] - sn[0] == (n = [ -1, -20, 1, 20 ][(e || event).keyCode - 37] || fx) ? fx : n  
};//运用三目运算符来判断
!function() {  
sn.unshift(n = sn[0] + fx); 
//如何判断游戏结束
if (sn.indexOf(n, 1) > 0 || n<0||n>399 || fx == 1 && n % 20 == 0 || fx == -1 && n % 20 == 19)  //判断它的几个死的方法
return alert("GAME OVER");  
draw(n, "#3399ff");  //调用函数,制作蛇身和颜色
if (n == dz) {  
while (sn.indexOf(dz = ~~(Math.random() * 400)) >= 0);  //食物的位置是随机的,此处使用随机数
draw(dz, "#66ffff"); //调用函数,制作蛇食物的颜色
} else  
draw(sn.pop(), "Black"); //蛇走过的地方需要记录,所以为背景颜色
setTimeout(arguments.callee, 130);   //设置蛇运动速度 
}();  
</script>
  
</body> 

</html>  